<ul class="nav flex-column">
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'main.dashboard' }}" href="{{ url_for('main.dashboard') }}">
            <i class="bi bi-speedometer2"></i> Dashboard
        </a>
    </li>
    
    <li class="nav-section-title mt-4">Bill Management</li>
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint and 'bill.list' in request.endpoint }}" href="{{ url_for('bill.list') }}">
            <i class="bi bi-receipt"></i> Bills
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'bill.create' }}" href="{{ url_for('bill.create') }}">
            <i class="bi bi-plus-circle"></i> New Bill
        </a>
    </li>
    
    {% if has_permission('view_credits') or has_permission('view_reports') %}
    <li class="nav-section-title mt-4">Credit Management</li>
    {% if has_permission('view_credits') %}
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint and 'credit.list' in request.endpoint }}" href="{{ url_for('credit.list') }}">
            <i class="bi bi-cash-coin"></i> Credits
        </a>
    </li>
    {% endif %}
    {% if has_permission('view_reports') %}
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'report.outstanding' }}" href="{{ url_for('report.outstanding') }}">
            <i class="bi bi-graph-up"></i> Outstanding
        </a>
    </li>
    {% endif %}
    {% endif %}
    
    {% if has_permission('view_deliveries') %}
    <li class="nav-section-title mt-4">Delivery Management</li>
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint and 'delivery.list' in request.endpoint }}" href="{{ url_for('delivery.list') }}">
            <i class="bi bi-truck"></i> Deliveries
        </a>
    </li>
    {% if has_permission('create_delivery') %}
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'delivery.create' }}" href="{{ url_for('delivery.create') }}">
            <i class="bi bi-plus-circle"></i> New Delivery
        </a>
    </li>
    {% endif %}
    {% endif %}
    
    {% if has_permission('view_reports') %}
    <li class="nav-section-title mt-4">Reports</li>
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'report.collection' }}" href="{{ url_for('report.collection') }}">
            <i class="bi bi-cash-stack"></i> Collection Report
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint == 'report.deliveries' }}" href="{{ url_for('report.deliveries') }}">
            <i class="bi bi-truck"></i> Deliveries Report
        </a>
    </li>
    {% endif %}
    
    <li class="nav-section-title mt-4">Settings</li>
    {% if has_permission('view_vendors') %}
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint and 'vendor.list' in request.endpoint }}" href="{{ url_for('vendor.list') }}">
            <i class="bi bi-people"></i> Vendors
        </a>
    </li>
    {% endif %}
    {% if has_permission('manage_permissions') %}
    <li class="nav-item">
        <a class="nav-link {{ 'active' if request.endpoint and 'permission.list' in request.endpoint }}" href="{{ url_for('permission.list') }}">
            <i class="bi bi-shield-lock"></i> Permissions
        </a>
    </li>
    {% endif %}
</ul>
